<h3>Choose a Lead Memory</h3>

<!-- Search Bar -->
<mat-form-field appearance="outline" class="search-field">
  <mat-label>Search memories</mat-label>
  <input matInput [formControl]="searchControl" placeholder="Type to search...">
  <mat-icon matSuffix>search</mat-icon>
</mat-form-field>

<!-- Memory List -->
<div class="memories-container">
  @for (memory of filteredMemories | async; track memory) {
    <mat-card class="memory-item"
      [class.selected]="selectedMemory === memory" (click)="selectMemory(memory)">
      <mat-card-content>
        <h3>{{ memory.title }}</h3>
        <p>{{ memory.text | slice:0:50 }}{{ memory.text.length > 50 ? '...' : '' }}</p>
      </mat-card-content>
    </mat-card>
  }

  @if ((filteredMemories | async)?.length === 0) {
    <div class="no-results">
      No memories found matching your search.
    </div>
  }
  @if (memories.length === 0 && !loading) {
    <div class="no-results">
      No memories available.
    </div>
  }
  @if (loading) {
    <app-loading-spinner [diameter]="40" [message]="'Loading memories...'"></app-loading-spinner>
  }
</div>

<!-- Selected Memory Display -->
@if (selectedMemory) {
  <div class="selected-memory-info">
    <strong>Selected:</strong> {{ selectedMemory.title }}
  </div>
}