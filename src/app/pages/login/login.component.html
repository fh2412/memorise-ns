<main class="login-main">
  <div class="logo"><img src="/assets/img/logo_big.png" alt="Logo big"></div>
  @if (!isRegistering) {
    <form [formGroup]="form" class="login-form" (ngSubmit)="login()">
      <h1 class="headline">Enter with your account</h1>
      <mat-form-field appearance="outline">
        <mat-label>Email</mat-label>
        <input type="email" matInput placeholder="Ex: pat@example.com" formControlName="email">
        @if (form.get('email')!.hasError('required')) {
          <mat-error>
            Email is required
          </mat-error>
        }
        @if (form.get('email')!.hasError('email')) {
          <mat-error>
            Email is invalid
          </mat-error>
        }
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
        <input type="password" matInput placeholder="Password" formControlName="password">
        @if (form.get('password')!.hasError('required')) {
          <mat-error>
            Password is required
          </mat-error>
        }
      </mat-form-field>
      <div class='aligned-to-right'>
        @if (!isActionInProgress) {
          <button mat-button color="primary" [disabled]="!form.get('email')!.valid"
            (click)="recoverPassword()"
            test-id="recover-password-button" type="button">
            Recover password
          </button>
        }
        @if (isActionInProgress) {
          <button mat-button color="primary" class="button-loader recover-password"
            test-id="recover-password-loader">
            <mat-spinner color="primary" diameter="20"></mat-spinner>
          </button>
        }
      </div>
      <div class="action-buttons">
        @if (!isActionInProgress) {
          <button mat-raised-button color="primary" [disabled]="!form.valid"
            test-id="login-button" type="submit">
            LOGIN
          </button>
        }
        @if (isActionInProgress) {
          <button mat-raised-button color="primary" class="button-loader"
            test-id="login-loader">
            <mat-spinner color="accent" diameter="20"></mat-spinner>
          </button>
        }
        <button mat-stroked-button color="primary" class="reg-button" (click)="toggleRegister()">REGISTER</button>
      </div>
    </form>
  }
  @if (isRegistering) {
    <app-register (cancelRegistration)="toggleRegister()"></app-register>
  }

</main>
<div class="picturediv">
</div>