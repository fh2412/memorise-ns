<!-- photo-download.component.html -->
<div class="photo-download-container">
    <!-- Filter Input -->
    <mat-form-field appearance="outline" class="filter-input">
      <mat-label>Filter by User</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="Search by username">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
  
    <!-- Display Mode Toggle -->
    <button mat-icon-button (click)="toggleDisplayMode()" class="display-mode-toggle">
      <mat-icon>{{ displayMode === 'grid' ? 'view_list' : 'grid_view' }}</mat-icon>
    </button>
  
    <!-- Grid View -->
    <div *ngIf="displayMode === 'grid'" class="photo-grid">
      <mat-card *ngFor="let photo of dataSource.filteredData" class="photo-card">
        <mat-checkbox 
          class="photo-checkbox"
          [checked]="selection.isSelected(photo)"
          (change)="selection.toggle(photo)">
        </mat-checkbox>
        <img mat-card-image [src]="photo.url || photo.url" [alt]="photo.url">
        <mat-card-footer>
          <p>{{ photo.width }}</p>
          <p>{{ photo.height }}</p>
        </mat-card-footer>
      </mat-card>
    </div>
  
    <!-- Table View -->
    <table *ngIf="displayMode === 'table'" mat-table [dataSource]="dataSource" class="photo-table">
      <!-- Checkbox Column -->
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox
            (change)="$event ? toggleAllRows() : null"
            [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="$event ? selection.toggle(row) : null"
            [checked]="selection.isSelected(row)">
          </mat-checkbox>
        </td>
      </ng-container>
  
      <!-- Thumbnail Column -->
      <ng-container matColumnDef="thumbnail">
        <th mat-header-cell *matHeaderCellDef>Thumbnail</th>
        <td mat-cell *matCellDef="let element">
          <img [src]="element.thumbnailUrl || element.url" [alt]="element.userName" class="thumbnail">
        </td>
      </ng-container>
  
      <!-- Username Column -->
      <ng-container matColumnDef="userName">
        <th mat-header-cell *matHeaderCellDef>Width</th>
        <td mat-cell *matCellDef="let element">{{ element.width }}</td>
      </ng-container>
  
      <!-- Upload Date Column -->
      <ng-container matColumnDef="uploadDate">
        <th mat-header-cell *matHeaderCellDef>Upload Date</th>
        <td mat-cell *matCellDef="let element">{{ element.uploadDate | date }}</td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <!-- Action Buttons -->
    <div class="action-buttons">
      <button mat-stroked-button color="primary" (click)="downloadAllPhotos()">
        <mat-icon>download</mat-icon>
        <span class="button-text">Download</span>
      </button>
      <button mat-raised-button color="accent" 
              (click)="downloadSelectedPhotos()"
              [disabled]="selection.selected.length === 0">
        Download Selected ({{ selection.selected.length }})
      </button>
    </div>
  </div>